# 效能測試報告

## 測試資訊

| 項目 | 內容 |
|-----|------|
| 測試日期 | 2025-10-30 |
| 測試人員 | Howie |
| 測試工具 | Locust 2.20.0 |
| 測試目標 | JSONPlaceholder API |
| 測試環境 | Production |

---

## 測試場景

### 場景 1：基本負載測試

**目的**：驗證系統在正常負載下的表現

**測試參數**：
- 總使用者數：100
- 增長速率：10 users/sec
- 測試時間：5 分鐘
- 目標 URL：https://jsonplaceholder.typicode.com

**測試結果**：

| 指標 | 數值 | 備註 |
|-----|------|------|
| 總請求數 | 10,000 | ✅ |
| 成功請求數 | 9,980 | ✅ |
| 失敗請求數 | 20 | ✅ (0.2%) |
| 平均回應時間 | 150ms | ✅ < 300ms |
| 50th percentile | 120ms | ✅ |
| 95th percentile | 250ms | ✅ |
| 99th percentile | 400ms | ⚠️ 略高 |
| 最大回應時間 | 850ms | ⚠️ |
| RPS (每秒請求數) | 66.7 | ✅ |

**結論**：
- ✅ 系統可穩定承受 100 個併發使用者
- ✅ 平均回應時間在可接受範圍內
- ⚠️ 99th percentile 和最大回應時間偏高，建議優化

---

### 場景 2：壓力測試

**目的**：找出系統的極限和瓶頸

**測試參數**：
- 總使用者數：500
- 增長速率：50 users/sec
- 測試時間：10 分鐘

**測試結果**：

| 指標 | 數值 | 備註 |
|-----|------|------|
| 總請求數 | 45,000 | |
| 成功請求數 | 43,500 | |
| 失敗請求數 | 1,500 | ⚠️ (3.3%) |
| 平均回應時間 | 450ms | ⚠️ |
| 95th percentile | 1,200ms | ❌ |
| RPS | 75.0 | |

**觀察到的問題**：
- ⚠️ 當使用者數超過 300 時，回應時間明顯增加
- ❌ 失敗率在 3.3%，超過可接受範圍 (< 1%)
- ⚠️ 系統在高負載下開始出現不穩定

**結論**：
- 系統的**最大承載能力約為 300 個併發使用者**
- 超過 300 人後，效能明顯下降
- 建議進行系統優化或增加資源

---

## 效能瓶頸分析

### 發現的問題

1. **回應時間隨使用者數增加而延長**
   - 原因：可能是資料庫查詢未優化
   - 建議：加入快取機制 (Redis)

2. **高負載下的失敗率上升**
   - 原因：伺服器資源不足
   - 建議：擴充伺服器或使用負載平衡

3. **特定 API 端點較慢**
   - GET /posts：平均 150ms ✅
   - GET /posts/{id}/comments：平均 300ms ⚠️
   - POST /posts：平均 500ms ❌

---

## 測試圖表

### 回應時間趨勢圖
```
(在實際測試時，Locust 會自動產生圖表)
```

### 使用者數 vs 回應時間
```
使用者數    平均回應時間
50         100ms
100        150ms
200        250ms
300        350ms
400        550ms  ⚠️
500        750ms  ❌
```

---

## 建議與行動計畫

### 短期改善（1 週內）
1. ✅ 加入 API 回應快取
2. ✅ 優化資料庫查詢
3. ✅ 增加 connection pool 大小

### 中期改善（1 個月內）
1. 實施 CDN 加速靜態資源
2. 部署負載平衡器
3. 增加伺服器資源

### 長期規劃（3 個月內）
1. 重構效能瓶頸程式碼
2. 實施微服務架構
3. 建立自動擴展機制

---

## 測試結論

### 總體評估
- 🟢 **正常負載表現**：優秀（100 使用者以下）
- 🟡 **中等負載表現**：良好（100-300 使用者）
- 🔴 **高負載表現**：需要改善（300+ 使用者）

### 建議的系統容量
- **推薦最大併發數**：250 使用者
- **需要優化後的目標**：500 使用者

---

**測試人員簽名**：________________  
**審核人員簽名**：________________  
**日期**：2025-10-30
