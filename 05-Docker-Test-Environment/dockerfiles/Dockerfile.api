# Dockerfile for API Testing
# 用途: 執行 API 測試 (pytest + requests)

FROM python:3.12-slim

# 設定工作目錄
WORKDIR /app

# 複製專案檔案
COPY 01-API-Testing-Framework/ /app/01-API-Testing-Framework/

# 安裝 Python 依賴
RUN pip install --no-cache-dir -r /app/01-API-Testing-Framework/requirements.txt

# 設定預設執行命令
# 執行 API 測試並生成 HTML 報告
CMD ["pytest", \
     "01-API-Testing-Framework/tests/", \
     "-v", \
     "--html=01-API-Testing-Framework/test-reports/api-docker-report.html", \
     "--self-contained-html"]

# 健康檢查 (可選)
HEALTHCHECK --interval=30s --timeout=10s --start-period=5s --retries=3 \
    CMD python -c "import requests; import pytest" || exit 1

# 標籤資訊
LABEL maintainer="QA Portfolio"
LABEL description="API Testing Container with pytest and requests"
LABEL version="1.0"
